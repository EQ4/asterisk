                                Release Summary

                              asterisk-11.19.0-rc1

                                Date: 2015-07-24

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Open Issues
    5. Other Changes
    6. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-11.18.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                   Testers                  Reporters                
   7 Matt Jordan            1 Damian Ivereigh        4 Walter Doekes          
   5 Walter Doekes                                   2 Rusty Newton           
   3 Joshua Colp                                     2 Etienne Lessard        
   3 Mark Michelson                                  2 Badalian Vyacheslav    
   2 ibercom                                         2 Etienne Lessard        
   2 Ivan Poddubny                                   1 Barry Chern            
   1 Patric Marschall                                1 Mark Petersen          
   1 Damian Ivereigh                                 1 Scott Griepentrog      
   1 Scott Griepentrog                               1 Mark Petersen          
   1 Michael Cargile                                 1 Dmitry Burilov         
   1 Richard Mudgett                                 1 Damian Ivereigh        
   1 Rusty Newton                                    1 Barry Chern            
   1 Corey Farrell                                   1 Patric Marschall       
                                                     1 Damian Ivereigh        
                                                     1 Patric Marschall       
                                                     1 PSDK                   
                                                     1 Corey Farrell          
                                                     1 Matt Jordan            
                                                     1 Andrey Biglari         
                                                     1 PSDK                   
                                                     1 hristo                 
                                                     1 Stefan EngstrAP:m      
                                                     1 Badalian Vyacheslav    
                                                     1 ibercom                
                                                     1 cervajs                
                                                     1 Dade Brandon           
                                                     1 Osaulenko Alexander    
                                                     1 ibercom                
                                                     1 Gregory Massel         
                                                     1 Gregory Massel         

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Applications/app_chanspy

   ASTERISK-25247: choppy audio when spying on a g722 channel, chan_sip or
   chan_pjsip
   Reported by: hristo
     * [5606da754a] Joshua Colp -- audiohook: Read the correct number of
       samples based on audiohook format.

    Category: Applications/app_dial

   ASTERISK-25212: [patch]Segfault when using DEBUG_FD_LEAKS
   Reported by: Walter Doekes
     * [028554faab] Walter Doekes -- astfd: Fix buffer overflow in
       DEBUG_FD_LEAKS.

    Category: Channels/chan_local

   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [7e8916908d] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.
     * [525bbf7d4e] Mark Michelson -- Local channels: Do not block control -1
       payloads.

    Category: Channels/chan_mgcp

   ASTERISK-25220: [patch]Closing of fd -1 in chan_mgcp.c
   Reported by: Walter Doekes
     * [f6bbc4f16e] Walter Doekes -- chan_mgcp: Don't call close on fd -1.

    Category: Channels/chan_sip/General

   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [7e8916908d] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.
     * [525bbf7d4e] Mark Michelson -- Local channels: Do not block control -1
       payloads.
   ASTERISK-22805: res_rtp_asterisk: Crash when calling BIO_ctrl_pending in
   dtls_srtp_check_pending when dialed by JSSIP
   Reported by: Dmitry Burilov
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.
   ASTERISK-25213: [patch]Possibility of deadlock in chan_sip INVITE early
   Replace code
   Reported by: Walter Doekes
     * [0e6d3f5ee5] Walter Doekes -- chan_sip: Fix early call pickup caused
       deadlock.
   ASTERISK-25212: [patch]Segfault when using DEBUG_FD_LEAKS
   Reported by: Walter Doekes
     * [028554faab] Walter Doekes -- astfd: Fix buffer overflow in
       DEBUG_FD_LEAKS.
   ASTERISK-25202: Hints extension state broken between 13.3.2 and 13.4
   Reported by: cervajs
     * [96bbcf495a] Matt Jordan -- main/pbx: Resolve case sensitivity
       regression in PBX hints
   ASTERISK-25139: Malicious transfer sequence locks up Asterisk
   Reported by: Gregory Massel
     * [d821f56b02] Mark Michelson -- chan_sip: Prevent deadlock when
       performing BYE with Also transfer.

    Category: Channels/chan_sip/IPv6

   ASTERISK-25100: asterisk coredump if host has an IPv6 address that end
   with ::80
   Reported by: Mark Petersen
     * [f9877139df] Ivan Poddubny -- Astobj2: Correctly treat hash_fn
       returning INT_MIN

    Category: Channels/chan_sip/Interoperability

   ASTERISK-25154: [patch]fromtag may need to be updated after successful
   call dialog match
   Reported by: Damian Ivereigh
     * [8b60998d29] Damian Ivereigh -- chan_sip.c: Update dialog fromtag
       after request with auth

    Category: Channels/chan_sip/SRTP

   ASTERISK-24550: res_rtp_asterisk: Crash in ast_rtp_on_ice_complete during
   DTLS handshake
   Reported by: Osaulenko Alexander
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.

    Category: Codecs/codec_adpcm

   ASTERISK-24717: ASAN: global-buffer-overflow codec_{ilbc | gsm | adpcm |
   ipc10}
   Reported by: Badalian Vyacheslav
     * [99c54fe42d] Ivan Poddubny -- Fix buffer overflow in slin sample
       frames generation.

    Category: Codecs/codec_gsm

   ASTERISK-24717: ASAN: global-buffer-overflow codec_{ilbc | gsm | adpcm |
   ipc10}
   Reported by: Badalian Vyacheslav
     * [99c54fe42d] Ivan Poddubny -- Fix buffer overflow in slin sample
       frames generation.

    Category: Codecs/codec_ilbc

   ASTERISK-24717: ASAN: global-buffer-overflow codec_{ilbc | gsm | adpcm |
   ipc10}
   Reported by: Badalian Vyacheslav
     * [99c54fe42d] Ivan Poddubny -- Fix buffer overflow in slin sample
       frames generation.

    Category: Codecs/codec_lpc10

   ASTERISK-24717: ASAN: global-buffer-overflow codec_{ilbc | gsm | adpcm |
   ipc10}
   Reported by: Badalian Vyacheslav
     * [99c54fe42d] Ivan Poddubny -- Fix buffer overflow in slin sample
       frames generation.

    Category: Core/Bridging

   ASTERISK-25250: chan_sip - Despite the channel being answered, caller on a
   call established via Local channel continues to hear ringback
   Reported by: Etienne Lessard
     * [7e8916908d] Mark Michelson -- Local channels: Alternate solution to
       ringback problem.
     * [525bbf7d4e] Mark Michelson -- Local channels: Do not block control -1
       payloads.

    Category: Core/General

   ASTERISK-25212: [patch]Segfault when using DEBUG_FD_LEAKS
   Reported by: Walter Doekes
     * [028554faab] Walter Doekes -- astfd: Fix buffer overflow in
       DEBUG_FD_LEAKS.
   ASTERISK-22559: gcc 4.6 and higher supports weakref attribute but asterisk
   doesn't detect it.
   Reported by: ibercom
     * [f98c458c92] ibercom -- weakref attribute detection broken with gcc
       4.6 and higher

    Category: Core/PBX

   ASTERISK-25094: PBX core: Investigate thread safety issues
   Reported by: Corey Farrell
     * [53658a14cc] Corey Farrell -- Fix unsafe uses of ast_context pointers.

    Category: Core/RTP

   ASTERISK-25219: [patch]Source and destination overlap in memcpy in
   rtp_engine.c
   Reported by: Walter Doekes
     * [c139956e95] Walter Doekes -- rtp_engine: Skip useless self-assignment
       in ast_rtp_engine_unload_format.

    Category: Documentation

   ASTERISK-24853: Documentation claims chan_sip outbound registrations
   support WS or WSS as valid transports (not true)
   Reported by: PSDK
     * [43a52df20d] Rusty Newton -- Documentation: chan_sip doesn't support
       WS or WSS in outbound register.

    Category: Resources/res_crypto

   ASTERISK-24550: res_rtp_asterisk: Crash in ast_rtp_on_ice_complete during
   DTLS handshake
   Reported by: Osaulenko Alexander
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.

    Category: Resources/res_rtp_asterisk

   ASTERISK-25103: Roundup - investigate Asterisk DTLS crashes
   Reported by: Rusty Newton
     * [47ebab959e] Joshua Colp -- res_rtp_asterisk: Ensure DTLS timeout
       timer is -1 if DTLS is not used.
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.
   ASTERISK-22805: res_rtp_asterisk: Crash when calling BIO_ctrl_pending in
   dtls_srtp_check_pending when dialed by JSSIP
   Reported by: Dmitry Burilov
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.
   ASTERISK-24651: [patch] Fix race condition in DTLS
   Reported by: Badalian Vyacheslav
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.
   ASTERISK-24832: [patch]DTLS-crashes within openssl
   Reported by: Stefan EngstrAP:m
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.
   ASTERISK-25127: DTLS crashes following "Unable to cancel schedule ID" in
   dtls_srtp_check_pending
   Reported by: Dade Brandon
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.

    Category: Resources/res_srtp

   ASTERISK-24550: res_rtp_asterisk: Crash in ast_rtp_on_ice_complete during
   DTLS handshake
   Reported by: Osaulenko Alexander
     * [1ad827327a] Joshua Colp -- res_rtp_asterisk: Prevent simultaneous
       access to DTLS SSL context.

    Category: Resources/res_timing_kqueue

   ASTERISK-19277: [patch]endlessly repeating error: "poll failed: Bad file
   descriptor"
   Reported by: Barry Chern
     * [b090a8d40b] Walter Doekes -- res_timing: Don't close FD 0 when out of
       open files.

    Category: Resources/res_timing_timerfd

   ASTERISK-19277: [patch]endlessly repeating error: "poll failed: Bad file
   descriptor"
   Reported by: Barry Chern
     * [b090a8d40b] Walter Doekes -- res_timing: Don't close FD 0 when out of
       open files.

  Improvement

    Category: Core/PBX

   ASTERISK-25040: pbx: Improve performance of reloads by making hint
   destruction more performant
   Reported by: Matt Jordan
     * [96bbcf495a] Matt Jordan -- main/pbx: Resolve case sensitivity
       regression in PBX hints

     ----------------------------------------------------------------------

                                  Open Issues

                                 [Back to Top]

   This is a list of all open issues from the issue tracker that were
   referenced by changes that went into this release.

  Bug

    Category: Channels/chan_dahdi

   ASTERISK-25257: [patch]channels/sig_pri.h -> sig_pri_span ->
   force_restart_unavailable_chans in wrong scope
   Reported by: Patric Marschall
     * [0433f08903] Patric Marschall -- sig_pri.h:
       force_restart_unavailable_chans in wrong scope

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author          | Summary                                 |
   |------------+-----------------+-----------------------------------------|
   | baf2aedba2 | Matt Jordan     | .version: Update for 11.19.0-rc1        |
   |------------+-----------------+-----------------------------------------|
   | bb4c1e1aaf | Matt Jordan     | .lastclean: Update for 11.19.0-rc1      |
   |------------+-----------------+-----------------------------------------|
   | bd6fd55ea4 | Michael Cargile | res/res_musiconhold: Add a warning when |
   |            |                 | MOH does not exist                      |
   |------------+-----------------+-----------------------------------------|
   | b36d670dc1 | Matt Jordan     | apps/app_dictate: Fix typo in           |
   |            |                 | attribution                             |
   |------------+-----------------+-----------------------------------------|
   | 883f6f5d21 | Matt Jordan     | tests/test_devicestate: Add additional  |
   |            |                 | tests for the device state API          |
   |------------+-----------------+-----------------------------------------|
   | e545c05e35 | Matt Jordan     | main/devicestate: Prevent duplicate     |
   |            |                 | registration of device state providers  |
   |------------+-----------------+-----------------------------------------|
   | 1e186dc857 | Richard Mudgett | chan_vpb.cc: Fix compiler warning       |
   |            |                 | Jenkins found.                          |
   |------------+-----------------+-----------------------------------------|
   | 9b74dcb687 | Matt Jordan     | Makefile: Remove coverage files on      |
   |            |                 | 'make clean'                            |
   |------------+-----------------+-----------------------------------------|
   | eed9b1ce52 | ibercom         | CLI: Cosmetic issue - core show uptime  |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 ChangeLog                       |35202 ----------------------------------------
 asterisk-11.18.0-summary.html   |   17
 asterisk-11.18.0-summary.txt    |   85
 b/.version                      |    2
 b/Makefile.moddir_rules         |    1
 b/apps/Makefile                 |    2
 b/apps/app_dictate.c            |    2
 b/apps/app_meetme.c             |   18
 b/autoconf/ast_gcc_attribute.m4 |    2
 b/channels/Makefile             |    4
 b/channels/chan_iax2.c          |    5
 b/channels/chan_local.c         |    9
 b/channels/chan_mgcp.c          |    4
 b/channels/chan_sip.c           |  153
 b/channels/chan_skinny.c        |    8
 b/channels/chan_vpb.cc          |    5
 b/channels/misdn/Makefile       |    2
 b/channels/sig_pri.h            |    2
 b/configs/sip.conf.sample       |    2
 b/configure                     |   24
 b/include/asterisk/pbx.h        |   16
 b/include/asterisk/slin.h       |    4
 b/main/astfd.c                  |   57
 b/main/astobj2.c                |    5
 b/main/audiohook.c              |   10
 b/main/channel_internal_api.c   |   11
 b/main/cli.c                    |   18
 b/main/devicestate.c            |    9
 b/main/features.c               |   39
 b/main/pbx.c                    |   40
 b/main/rtp_engine.c             |    4
 b/menuselect/configure          |    8
 b/pbx/Makefile                  |    2
 b/pbx/pbx_config.c              |   15
 b/res/Makefile                  |    2
 b/res/res_musiconhold.c         |    2
 b/res/res_rtp_asterisk.c        |  210
 b/res/res_timing_kqueue.c       |    7
 b/res/res_timing_timerfd.c      |    7
 b/tests/test_devicestate.c      |  423
 40 files changed, 880 insertions(+), 35558 deletions(-)
